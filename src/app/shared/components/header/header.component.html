<!-- Header Navigation -->
<header
  class="bg-white dark:bg-sw-dark-blue text-sw-dark-blue dark:text-gray-100 fixed top-0 left-0 right-0 z-50 transition-all duration-300 ease-in-out border-b border-sw-dark-platinum dark:border-gray-800 h-[var(--app-header-height)]"
>
  <div class="container mx-auto px-4 h-full">
    <div class="flex items-center justify-between h-full">

      <!-- Left Side: Logo and Navigation -->
      <div
        class="flex items-center h-full"
        [ngClass]="isCompact ? 'md:space-x-4' : 'md:space-x-8'"
      >
        <!-- Logo -->
        <div class="flex-shrink-0 flex items-center h-full">
          <a
            routerLink="/"
            class="flex items-center transition-all duration-300 ease-in-out mr-0 text-sw-dark-blue dark:text-gray-100"
            [ngClass]="isCompact ? 'md:mr-14' : 'md:mr-20'"
          >
            <app-star-wars-logo
              [classNames]="isCompact ? 'h-6 md:h-9 w-auto transition-all duration-300' : 'h-6 md:h-12 w-auto transition-all duration-300'"
            ></app-star-wars-logo>
          </a>
        </div>

        <!-- Desktop Navigation -->
        <nav
          class="hidden md:flex items-center"
          [ngClass]="isCompact ? 'space-x-4' : 'space-x-8'"
        >
          <a
            *ngFor="let item of navItems"
            [routerLink]="item.route"
            routerLinkActive="text-sw-dark-blue dark:text-sw-yellow font-bold"
            #rla="routerLinkActive"
            class="text-sw-dark-blue dark:text-gray-100 hover:text-gray-600 dark:hover:text-sw-yellow transition-colors duration-200 py-2 text-sm leading-tight font-normal"
          >
            <span [ngClass]="rla.isActive ? 'border-b border-sw-dark-blue dark:border-sw-yellow' : ''">{{ item.label }}</span>
          </a>
        </nav>
      </div>

      <!-- Right Side: Search and Theme Toggle (Desktop) -->
      <div class="hidden md:flex items-center space-x-4 h-full">
        <form (ngSubmit)="onSearch()" class="relative">
          <input
            type="text"
            [(ngModel)]="searchQuery"
            name="search"
            placeholder="Suche"
            class="bg-gray-100 dark:bg-gray-800 text-sw-dark-blue dark:text-gray-100 rounded-sm dark:rounded-full px-4 py-2 pr-10 border border-sw-silver dark:border-none focus:outline-none focus:ring-1 focus:ring-sw-dark-blue focus:border-sw-dark-blue dark:focus:ring-2 dark:focus:ring-sw-yellow min-w-56 dark:w-64 min-h-12 placeholder:text-sw-silver dark:placeholder:text-gray-400 placeholder:text-base placeholder:leading-5 placeholder:font-normal placeholder:font-roboto transition-all duration-300 hover:border-sw-dark-blue dark:hover:border-none"
          />
          <button
            type="submit"
            class="absolute right-3 top-1/2 transform -translate-y-1/2 text-sw-silver dark:text-gray-400 hover:text-sw-dark-blue dark:hover:text-sw-yellow transition-colors duration-200"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
          </button>
        </form>

        <!-- Theme Toggle Button -->
        <button
          (click)="toggleTheme()"
          class="p-2 rounded-full text-sw-dark-blue dark:text-sw-yellow hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-400 dark:focus:ring-sw-yellow"
          [attr.aria-label]="isDark() ? 'Switch to light mode' : 'Switch to dark mode'"
        >
          <!-- Sun Icon -->
          <svg *ngIf="isDark()" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
          </svg>
          <!-- Moon Icon -->
          <svg *ngIf="!isDark()" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
          </svg>
        </button>
      </div>

      <!-- Mobile Menu Button -->
      <div class="md:hidden flex items-center space-x-4">
        <!-- Theme Toggle (Mobile) -->
        <button
          (click)="toggleTheme()"
          class="text-sw-dark-blue dark:text-gray-100 focus:outline-none"
        >
             <svg *ngIf="isDark()" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
          </svg>
          <svg *ngIf="!isDark()" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
          </svg>
        </button>

        <button
          (click)="toggleMobileMenu()"
          class="text-sw-dark-blue dark:text-gray-100 focus:outline-none"
          aria-label="Toggle menu"
        >
          <svg
            *ngIf="!isMobileMenuOpen"
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
          <svg
            *ngIf="isMobileMenuOpen"
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div
      *ngIf="isMobileMenuOpen"
      class="md:hidden pb-4 animate-slide-down bg-gray-100 dark:bg-sw-dark-blue shadow-lg absolute top-[var(--app-header-height)] left-0 w-full px-4 border-t border-gray-100 dark:border-gray-800"
    >
      <!-- Mobile Navigation -->
      <nav class="flex flex-col space-y-4 mb-4 pt-4">
        <a
          *ngFor="let item of navItems"
          [routerLink]="item.route"
          routerLinkActive="text-sw-dark-blue dark:text-sw-yellow font-bold"
          #rla="routerLinkActive"
          (click)="closeMobileMenu()"
          class="text-gray-600 dark:text-gray-100 hover:text-gray-800 dark:hover:text-sw-yellow transition-colors duration-200 text-md leading-tight border-b border-sw-dark-platinum dark:border-gray-700 pb-2"
        >
          <span>{{ item.label }}</span>
        </a>
      </nav>

      <!-- Mobile Search -->
      <form (ngSubmit)="onSearch()" class="relative pb-2">
        <input
          type="text"
          [(ngModel)]="searchQuery"
          name="search"
          placeholder="Suche"
          class="bg-gray-100 dark:bg-gray-800 text-sw-dark-blue dark:text-gray-100 rounded-sm dark:rounded-full px-4 py-2 pr-10 border border-sw-silver dark:border-none focus:outline-none focus:ring-1 focus:ring-sw-dark-blue focus:border-sw-dark-blue dark:focus:ring-2 dark:focus:ring-sw-yellow w-full min-h-12 placeholder:text-sw-silver dark:placeholder:text-gray-400 placeholder:text-base placeholder:leading-5 placeholder:font-normal placeholder:font-roboto transition-all duration-300 hover:border-sw-dark-blue dark:hover:border-none"
        />
        <button
          type="submit"
          class="absolute right-3 top-1/2 transform -translate-y-1/2 -mt-1 text-sw-silver dark:text-gray-400 hover:text-sw-dark-blue dark:hover:text-sw-yellow transition-colors duration-200"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </button>
      </form>
    </div>
  </div>
</header>
